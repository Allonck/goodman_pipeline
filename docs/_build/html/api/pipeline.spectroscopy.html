

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pipeline.spectroscopy package &mdash; Goodman HTS Pipeline Documentation 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Goodman HTS Pipeline Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">pipeline.spectroscopy package</a><ul>
<li><a class="reference internal" href="#subpackages">Subpackages</a></li>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-pipeline.spectroscopy.new_wavelength">pipeline.spectroscopy.new_wavelength module</a></li>
<li><a class="reference internal" href="#module-pipeline.spectroscopy.redspec">pipeline.spectroscopy.redspec module</a></li>
<li><a class="reference internal" href="#module-pipeline.spectroscopy.wavelength">pipeline.spectroscopy.wavelength module</a></li>
<li><a class="reference internal" href="#module-pipeline.spectroscopy">Module contents</a></li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Goodman HTS Pipeline Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>pipeline.spectroscopy package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/pipeline.spectroscopy.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pipeline-spectroscopy-package">
<h1>pipeline.spectroscopy package<a class="headerlink" href="#pipeline-spectroscopy-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="pipeline.spectroscopy.tests.html">pipeline.spectroscopy.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pipeline.spectroscopy.tests.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline.spectroscopy.tests.html#module-pipeline.spectroscopy.tests.test_redspec">pipeline.spectroscopy.tests.test_redspec module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline.spectroscopy.tests.html#module-pipeline.spectroscopy.tests.test_wavelength">pipeline.spectroscopy.tests.test_wavelength module</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline.spectroscopy.tests.html#module-pipeline.spectroscopy.tests">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-pipeline.spectroscopy.new_wavelength">
<span id="pipeline-spectroscopy-new-wavelength-module"></span><h2>pipeline.spectroscopy.new_wavelength module<a class="headerlink" href="#module-pipeline.spectroscopy.new_wavelength" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="pipeline.spectroscopy.new_wavelength.DataValidationError">
<em class="property">exception </em><code class="descclassname">pipeline.spectroscopy.new_wavelength.</code><code class="descname">DataValidationError</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.new_wavelength.DataValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">Exception</span></code></p>
</dd></dl>

<dl class="class">
<dt id="pipeline.spectroscopy.new_wavelength.WavelengthCalibration">
<em class="property">class </em><code class="descclassname">pipeline.spectroscopy.new_wavelength.</code><code class="descname">WavelengthCalibration</code><span class="sig-paren">(</span><em>data_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.new_wavelength.WavelengthCalibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
</dd></dl>

</div>
<div class="section" id="module-pipeline.spectroscopy.redspec">
<span id="pipeline-spectroscopy-redspec-module"></span><h2>pipeline.spectroscopy.redspec module<a class="headerlink" href="#module-pipeline.spectroscopy.redspec" title="Permalink to this headline">¶</a></h2>
<p>Pipeline for GOODMAN spectra Extraction.</p>
<p>This program finds reduced images, i.e. trimmed, bias subtracted, flat fielded,
etc. that match the &lt;pattern&gt; in the source folder, then classify them in two
groups: Science or Lamps. For science images, finds the spectrum or spectra and
traces it doing some fit.
Simon Torres 2016-06-28</p>
<dl class="class">
<dt id="pipeline.spectroscopy.redspec.MainApp">
<em class="property">class </em><code class="descclassname">pipeline.spectroscopy.redspec.</code><code class="descname">MainApp</code><a class="headerlink" href="#pipeline.spectroscopy.redspec.MainApp" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Defines and initialize all important variables for processing the data</p>
<p>The MainApp class controls the way the night is organized for further
processing. It also sets the appropriate parameters that will allow for a
smooth working in all the other modules.</p>
</dd></dl>

<dl class="function">
<dt id="pipeline.spectroscopy.redspec.get_args">
<code class="descclassname">pipeline.spectroscopy.redspec.</code><code class="descname">get_args</code><span class="sig-paren">(</span><em>arguments=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.redspec.get_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Handles the argparse library and returns the arguments</p>
<p>The list of arguments can be found with running <cite>redspec -h</cite>.</p>
<dl class="docutils">
<dt>Notes:</dt>
<dd>The full list of arguments are not listed here as the may evolve in
which case is impossible to keep this up to date.</dd>
<dt>Returns:</dt>
<dd>An object that contains all the variables parsed through the argument
system</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-pipeline.spectroscopy.wavelength">
<span id="pipeline-spectroscopy-wavelength-module"></span><h2>pipeline.spectroscopy.wavelength module<a class="headerlink" href="#module-pipeline.spectroscopy.wavelength" title="Permalink to this headline">¶</a></h2>
<p>Contains the tools to produce a wavelength solution</p>
<p>This module gets the extracted data to produce a wavelength solution, linearize
the spectrum and write the solution to the image’s header following the FITS
standard.</p>
<dl class="class">
<dt id="pipeline.spectroscopy.wavelength.WavelengthCalibration">
<em class="property">class </em><code class="descclassname">pipeline.spectroscopy.wavelength.</code><code class="descname">WavelengthCalibration</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthCalibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Wavelength Calibration Class</p>
<p>The WavelengthCalibration class is instantiated for each of the science
images, which are treated as a “science object”. In this first release it
can find a wavelength solution for a given comparison lamp using an
interactive GUI based on Matplotlib. Although it works very good, for the
next release there is a plan for creating an independent GUI based on QT in
order to work better in different screen sizes and other topic such as
showing warnings, messages and help.</p>
<p>This class takes 1D spectrum with no wavelength calibration and returns fits
files with wavelength solutions using the FITS standard for linear
solutions. Goodman spectra are slightly non-linear therefore they are
linearized and smoothed before they are returned for the user.</p>
<dl class="method">
<dt id="pipeline.spectroscopy.wavelength.WavelengthCalibration.add_wavelength_solution">
<code class="descname">add_wavelength_solution</code><span class="sig-paren">(</span><em>ccd</em>, <em>x_axis</em>, <em>evaluation_comment=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthCalibration.add_wavelength_solution" title="Permalink to this definition">¶</a></dt>
<dd><p>Add wavelength solution to the new FITS header</p>
<p>Defines FITS header keyword values that will represent the wavelength
solution in the header so that the image can be read in any other
astronomical tool. (e.g. IRAF)</p>
<dl class="docutils">
<dt>Notes:</dt>
<dd>This method also saves the data to a new FITS file, This should be
in separated methods to have more control on either process.</dd>
<dt>Args:</dt>
<dd><p class="first">ccd (object): Instance of CCDData
x_axis:
evaluation_comment (str): A comment with information regarding the</p>
<blockquote class="last">
<div>quality of the wavelength solution</div></blockquote>
</dd>
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>ccd (object): A ccdproc.CCDData instance with linear wavelength</dt>
<dd>solution on it.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pipeline.spectroscopy.wavelength.WavelengthCalibration.get_wsolution">
<code class="descname">get_wsolution</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthCalibration.get_wsolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mathematical model of the wavelength solution</p>
<p>The wavelength solution is a callable mathematical function from
astropy.modeling.models. By obtaining this mathematical model the user
can use its own method to apply it to a given data.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd><dl class="first last docutils">
<dt>wsolution (callable): A callable mathematical function. None if the</dt>
<dd>wavelength solution doesn’t exist.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="pipeline.spectroscopy.wavelength.WavelengthCalibration.line_search_method">
<code class="descname">line_search_method</code><em class="property"> = None</em><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthCalibration.line_search_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Instrument configuration and spectral characteristics</p>
</dd></dl>

<dl class="attribute">
<dt id="pipeline.spectroscopy.wavelength.WavelengthCalibration.pixel_center">
<code class="descname">pixel_center</code><em class="property"> = None</em><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthCalibration.pixel_center" title="Permalink to this definition">¶</a></dt>
<dd><p>this data must come parsed</p>
</dd></dl>

<dl class="attribute">
<dt id="pipeline.spectroscopy.wavelength.WavelengthCalibration.red_limit">
<code class="descname">red_limit</code><em class="property"> = None</em><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthCalibration.red_limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Interactive wavelength finding</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pipeline.spectroscopy.wavelength.WavelengthSolution">
<em class="property">class </em><code class="descclassname">pipeline.spectroscopy.wavelength.</code><code class="descname">WavelengthSolution</code><span class="sig-paren">(</span><em>solution_type=None</em>, <em>model_name=None</em>, <em>model_order=0</em>, <em>model=None</em>, <em>ref_lamp=None</em>, <em>eval_comment=''</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthSolution" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Contains all relevant information of a given wavelength solution</p>
<p>Stores the mathematical model that allows to convert from pixel to angstrom
as well as more detailed information regarding the type of solution and the
quality.</p>
<dl class="method">
<dt id="pipeline.spectroscopy.wavelength.WavelengthSolution.check_compatibility">
<code class="descname">check_compatibility</code><span class="sig-paren">(</span><em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthSolution.check_compatibility" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks compatibility of new data</p>
<p>A wavelength solution is stored as an object (this class). As an
attribute of this class there is a dictionary that contains critical
parameters of the spectrum that were used to obtain this solution.
In order to apply the same solution to another spectrum its header has
to be parsed and then the parameters are compared in order of
importance.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>header (object): FITS header instance from</dt>
<dd>astropy.io.fits.header.Header.</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd>True if the new data is compatible with the solution or False if its
not.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pipeline.spectroscopy.wavelength.WavelengthSolution.set_solution_name">
<code class="descname">set_solution_name</code><span class="sig-paren">(</span><em>header</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthSolution.set_solution_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines a name for the solution</p>
<p>Using the header’s information define a string that could be used as a
keyword to identify a particular solution in the event that multiple
solutions or instances of this class are stored somewhere/somehow.</p>
<dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>header (object): FITS header instance from</dt>
<dd>astropy.io.fits.header.Header.</dd>
</dl>
</dd>
<dt>Returns:</dt>
<dd>Wavelength solution name.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="pipeline.spectroscopy.wavelength.WavelengthSolution.set_spectral_features">
<code class="descname">set_spectral_features</code><span class="sig-paren">(</span><em>header</em><span class="sig-paren">)</span><a class="headerlink" href="#pipeline.spectroscopy.wavelength.WavelengthSolution.set_spectral_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates dictionary that defines the instrument configuration</p>
<p>Both Blue and Red Camera produce slightly different FITS headers being
the red camera the one that provides more precise and better
information. This method will recognize the camera and create the
dictionary accordingly.</p>
<dl class="docutils">
<dt>Notes:</dt>
<dd>As of August 2017 both headers are FITS compliant and contain the
same keywords.</dd>
<dt>Args:</dt>
<dd>header (object): Instance of astropy.io.fits.header.Header.</dd>
<dt>Returns:</dt>
<dd>A dictionary that contains key information regarding the kind of
spectroscopic data, basically related to the instrument
configuration.
The keywords it reads are: INSTCONF, GRATING, ROI, FILTER, FILTER2,
SLIT, WAVMODE, CAM_ANG, GRT_ANG.</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pipeline.spectroscopy">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pipeline.spectroscopy" title="Permalink to this headline">¶</a></h2>
<p>Goodman Spectroscopic Tools</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 NOAO/AURA, Inc. All rights reserved.

    </p>
    <p>
         This project has been licensed under: <a href="index.html#license">BSD 3-Clause License.</a>
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>