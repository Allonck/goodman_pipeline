

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Requirements &mdash; Goodman HTS Pipeline Documentation 1.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> Goodman HTS Pipeline Documentation
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Requirements</a><ul>
<li><a class="reference internal" href="#id1">Data Requirements</a><ul>
<li><a class="reference internal" href="#reference-lamp-files">Reference Lamp Files</a><ul>
<li><a class="reference internal" href="#headers-requirements">Headers Requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-organization">File organization</a></li>
</ul>
</li>
<li><a class="reference internal" href="#software-requirements">Software Requirements</a><ul>
<li><a class="reference internal" href="#setup-for-remote-use">Setup for Remote Use</a><ul>
<li><a class="reference internal" href="#establish-a-vnc-connection">Establish a VNC connection</a></li>
<li><a class="reference internal" href="#vnc-from-the-terminal">VNC from the Terminal</a></li>
</ul>
</li>
<li><a class="reference internal" href="#setup-for-local-installation">Setup for local installation</a><ul>
<li><a class="reference internal" href="#dcr-optional">DCR (optional)</a><ul>
<li><a class="reference internal" href="#compiling-dcr">Compiling DCR</a></li>
<li><a class="reference internal" href="#installing-the-dcr-binary">Installing the DCR binary</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Goodman HTS Pipeline Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Requirements</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/requirements.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="requirements">
<h1>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h1>
<p>We present here the data and software requirements that assure that the pipeline
can perform smoothly. We recommend to check your data and your system before
running it. Otherwise, the pipeline
can perform in an unexpected way or even crash.</p>
<div class="section" id="id1">
<h2>Data Requirements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>The <a href="#id4"><span class="problematic" id="id5">|goodman HTS|</span></a>’s data has seen some evolution in the past years, in shape and
most importantly in its headers. The <a href="#id6"><span class="problematic" id="id7">|pipeline full name|</span></a> relies heavily on the data’s
header so this is in fact very important.</p>
<p>The headers must be <a class="reference external" href="https://fits.gsfc.nasa.gov/fits_standard.html">FITS Compliant</a>,
otherwise the software exits with errors.</p>
<p>Bear in mind that the <a href="#id8"><span class="problematic" id="id9">|goodman hts|</span></a> has <a class="reference external" href="http://www.ctio.noao.edu/soar/content/goodman-spectrograph-overview">two cameras</a>, <em>Blue</em> and <em>Red</em>.</p>
<p>Recent data obtained with the Red Camera already meets all the requirements in
terms of format and header cards. Data obtained with the Blue Camera before
<a href="#id10"><span class="problematic" id="id11">|headers change|</span></a> is expected to have several format issues:</p>
<ol class="arabic simple">
<li>There were non fits-compliant characters in some comments. To solve that, you can edit the header using the most recent version of AstroPy, IRAF or WCSTOOLS to remove the following keywords: <code class="docutils literal"><span class="pre">PARAM0</span></code>, <code class="docutils literal"><span class="pre">PARAM61</span></code>, <code class="docutils literal"><span class="pre">PARAM62</span></code> and <code class="docutils literal"><span class="pre">PARAM63</span></code>.</li>
<li>The data was defined as 3D, just like a single frame of a data cube. To solve this, you will have to read the data and rewrite it with only two dimensions using AstroPy or IRAF.</li>
<li>Some keywords were added with time.</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>INSTCONF: contains the name of the Goodman Camera used, e.g., “Blue” or “Red”.</li>
<li>WAVMODE: contains the ruling number of the used grating and the mode name, e.g., “400 m1” or “400 m2”.</li>
<li>ROI: the name of the region of interest, e.g., “Spectroscopic 1x1”, “user-defined”, etc.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="4">
<li>Duplicated keywords. Make sure that your data does not contain duplicated keywords.</li>
</ol>
<div class="section" id="reference-lamp-files">
<h3>Reference Lamp Files<a class="headerlink" href="#reference-lamp-files" title="Permalink to this headline">¶</a></h3>
<p>Having an <em>automatic wavelength calibration method</em> relies on having previously calibrated
reference lamps obtained in the same configuration or mode. It is also important
that the lamp names are correct, for instance <code class="docutils literal"><span class="pre">HgAr</span></code> is quite different than
<code class="docutils literal"><span class="pre">HgArNe</span></code>. Spaces between lamps are not allowed. And the name is case
insensitive: you may write “HgAr”, “HGAR” or “hgar”.
The list of current lamps is the following.</p>
<span id="table-supported-modes"></span><table border="1" class="docutils" id="id2">
<caption><span class="caption-text">List of <a href="#id12"><span class="problematic" id="id13">|goodman hts|</span></a> supported modes</span><a class="headerlink" href="#id2" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="15%" />
<col width="10%" />
<col width="13%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Grating</th>
<th class="head">Mode</th>
<th class="head">Filter</th>
<th class="head">Lamp</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>400</td>
<td>M1</td>
<td>None</td>
<td>HgAr, HgArNe</td>
</tr>
<tr class="row-odd"><td>400</td>
<td>M2</td>
<td>GG455</td>
<td>Ar, Ne, HgAr, HgArNe, CuHeAr, FeHeAr</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">More lamps will be made public shortly.</p>
</div>
<div class="section" id="headers-requirements">
<span id="header-requirements"></span><h4>Headers Requirements<a class="headerlink" href="#headers-requirements" title="Permalink to this headline">¶</a></h4>
<p>Goodman HTS spectra have small non-linearities on their wavelength solutions.
They are small but must be taken into account.</p>
<p>It was necessary to  implement a custom way of storing non-linear wavelength
solutions that at the same time allowed for keeping data as <em>untouched</em> as
possible. The main reason is that linearizing the reference lamps made it
harder to track down those non-linearities on the new data being calibrated. Also,
The documentation on how to write non-linear solution to a FITS header is
far too complex for our use case and there is no apparent effort on trying to
simplify it. Below we compile a list of required keywords for
comparison lamps if they want to be used as reference lamps. The full list of
keywords is listed under <a href="#id22"><span class="problematic" id="id23">`New Keywords`_</span></a>.</p>
<dl class="docutils">
<dt>General Custom Keywords:</dt>
<dd><p class="first">Every image processed with the <em>Goodman Spectroscopic Pipeline</em> will have the
<a href="#id24"><span class="problematic" id="id25">`general keywords`_</span></a>. The one required for a reference lamp is the following:</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">GSP_FNAM</span> <span class="o">=</span> <span class="n">file</span><span class="o">-</span><span class="n">name</span><span class="o">.</span><span class="n">fits</span> <span class="o">/</span> <span class="n">Current</span> <span class="n">file</span> <span class="n">name</span>
</pre></div>
</div>
</dd>
<dt>Record of <a href="#id26"><span class="problematic" id="id27">`detected lines`_</span></a> in Pixel and Angstrom:</dt>
<dd><p class="first">Reference lamps have a record of usable lines in its header. Initially the lamp
is run through a tool that identifies the lines and records its pixel value.
The root string is <code class="docutils literal"><span class="pre">GSP_P</span></code> followed by a zero-padded three digit sequential number
(001, 002, etc). For instance.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">GSP_P001</span><span class="o">=</span> <span class="mf">499.5377036976768</span>  <span class="o">/</span> <span class="n">Line</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">pixel</span> <span class="n">value</span>
<span class="n">GSP_P002</span><span class="o">=</span> <span class="mf">810.5548319623747</span>  <span class="o">/</span> <span class="n">Line</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">pixel</span> <span class="n">value</span>
<span class="n">GSP_P003</span><span class="o">=</span> <span class="mf">831.6984711087946</span>  <span class="o">/</span> <span class="n">Line</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">pixel</span> <span class="n">value</span>
</pre></div>
</div>
<p>Later, the equivalent values in angstrom are then recorded with the root string
<code class="docutils literal"><span class="pre">GSP_A</span></code> and the same numerical pattern as before.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">GSP_A001</span><span class="o">=</span> <span class="mf">5460.75</span>            <span class="o">/</span> <span class="n">Line</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">angstrom</span> <span class="n">value</span>
<span class="n">GSP_A002</span><span class="o">=</span> <span class="mf">5769.61</span>            <span class="o">/</span> <span class="n">Line</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">angstrom</span> <span class="n">value</span>
<span class="n">GSP_A003</span><span class="o">=</span> <span class="mf">5790.67</span>            <span class="o">/</span> <span class="n">Line</span> <span class="n">location</span> <span class="ow">in</span> <span class="n">angstrom</span> <span class="n">value</span>
</pre></div>
</div>
<p class="last"><code class="docutils literal"><span class="pre">GSP_P001</span></code> and <code class="docutils literal"><span class="pre">GSP_A001</span></code> are a match. If any of the angstrom value entries
have a value of <code class="docutils literal"><span class="pre">0</span></code> (default value) the equivalent pair pixel/angstrom entry is ignored.
Also they must be organized in an <em>always increasing</em> way, if they are not, they
will be ignored too.</p>
</dd>
</dl>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Those keywords are used to calculate the mathematical fit of the
wavelength solution and are not used on normal operation. Our philosophy here
is that the line identification has to be done only once and then the
model can be fitted several times, actually you can try several models
if you want. (On your own)</p>
</div>
<dl class="docutils">
<dt><a href="#id28"><span class="problematic" id="id29">`Non-linear wavelength solution`_</span></a>:</dt>
<dd><p class="first">The method for recording the non-linear wavelength solution is actually
very simple. It requires: <code class="docutils literal"><span class="pre">GSP_FUNC</span></code> which stores a string with the name of
the mathematical model from <code class="docutils literal"><span class="pre">astropy.modeling.models</span></code>. <code class="docutils literal"><span class="pre">GSP_ORDR</span></code> stores
the order or degree of the model. <code class="docutils literal"><span class="pre">GSP_NPIX</span></code> stores the number of pixels in
the spectral axis. Then there is N+1 parameter keywords where N is the order
of the model defined by <code class="docutils literal"><span class="pre">GSP_ORDR</span></code>. The root string of the keyword is <code class="docutils literal"><span class="pre">GSP_C</span></code>
and the rest is a zero-padded three digit number starting on zero to N.
See the example below.</p>
<div class="last highlight-default"><div class="highlight"><pre><span></span><span class="n">GSP_FUNC</span><span class="o">=</span> <span class="n">Chebyshev1D</span>          <span class="o">/</span> <span class="n">Mathematical</span> <span class="n">model</span> <span class="n">of</span> <span class="n">non</span><span class="o">-</span><span class="n">linearized</span> <span class="n">data</span>
<span class="n">GSP_ORDR</span><span class="o">=</span> <span class="mi">3</span>                    <span class="o">/</span> <span class="n">Mathematical</span> <span class="n">model</span> <span class="n">order</span>
<span class="n">GSP_NPIX</span><span class="o">=</span> <span class="mi">4060</span>                 <span class="o">/</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">Pixels</span>
<span class="n">GSP_C000</span><span class="o">=</span> <span class="mf">4963.910057577853</span>    <span class="o">/</span> <span class="n">Value</span> <span class="n">of</span> <span class="n">parameter</span> <span class="n">c0</span>
<span class="n">GSP_C001</span><span class="o">=</span> <span class="mf">0.9943952599223119</span>   <span class="o">/</span> <span class="n">Value</span> <span class="n">of</span> <span class="n">parameter</span> <span class="n">c1</span>
<span class="n">GSP_C002</span><span class="o">=</span> <span class="mf">5.59241584012648e-08</span> <span class="o">/</span> <span class="n">Value</span> <span class="n">of</span> <span class="n">parameter</span> <span class="n">c2</span>
<span class="n">GSP_C003</span><span class="o">=</span> <span class="o">-</span><span class="mf">1.2283411678846e-10</span> <span class="o">/</span> <span class="n">Value</span> <span class="n">of</span> <span class="n">parameter</span> <span class="n">c3</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This method has been developed and tested to write correctly polynomial-like
models. And ONLY reads <code class="docutils literal"><span class="pre">Chebyshev1D</span></code> models.
Other models will just be ignored. More development will be done based on
request, suggestions or needs.</p>
</div>
</div>
</div>
<div class="section" id="file-organization">
<h3>File organization<a class="headerlink" href="#file-organization" title="Permalink to this headline">¶</a></h3>
<p>redccd and redspec will look for all FITS files inside the current working
directory or inside the path provided with the <code class="docutils literal"><span class="pre">--raw-path</span></code> (redccd)/<code class="docutils literal"><span class="pre">--data-path</span></code> (redspec)
flag non-recursively. Make sure to have only data that contains relevant signal.
Data obtained during the focusing process, saturated flats, etc, must be removed.</p>
<p>Also, we recommend you follow these good practices:</p>
<ul class="simple">
<li>Delete all unnecessary files (focus,  test, acquisition, unwanted exposures, etc)</li>
<li>Don’t mix different ROI (Region Of Interest), Gain and Readout Noises.</li>
<li>Make sure all the required file types are present: BIAS, FLAT, COMP, OBJECT.</li>
</ul>
</div>
</div>
<div class="section" id="software-requirements">
<h2>Software Requirements<a class="headerlink" href="#software-requirements" title="Permalink to this headline">¶</a></h2>
<p>Using the pipeline remotely is the recommended method, in which case you don’t need
to worry about software requirements.</p>
<p>However, for users who wish to go ahead with a local installation, we provide
simple instructions in the <a class="reference internal" href="#setup-for-local-installation">Setup for local installation</a> section.</p>
<div class="section" id="setup-for-remote-use">
<h3>Setup for Remote Use<a class="headerlink" href="#setup-for-remote-use" title="Permalink to this headline">¶</a></h3>
<p>The Goodman Spectroscopic Data Reduction Pipeline has been installed on a
dedicated computer at SOAR. The procedure requires to open a VNC session, for which
you need to be connected to the SOAR VPN. The credentials for the VPN are the
same you used for your observing run, provided by your <em>Support Scientist</em>, who
will also give you the information for the data reduction computer VNC
connection.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">IRAF is available in the data server at SOAR. Running <code class="docutils literal"><span class="pre">iraf</span></code> will
open an <em>xgterm</em> and <em>ds9</em> windows. <code class="docutils literal"><span class="pre">iraf-only</span></code> will open <em>xgterm</em> but
not <em>ds9</em></p>
</div>
<div class="section" id="establish-a-vnc-connection">
<h4>Establish a VNC connection<a class="headerlink" href="#establish-a-vnc-connection" title="Permalink to this headline">¶</a></h4>
<p>Separately, you should receive a server hostname, IP, display number and
VNC-password.</p>
<span id="vnc-displays-table"></span><table border="1" class="docutils" id="id3">
<caption><span class="caption-text">VNC display number and working folder assigned to each partner.</span><a class="headerlink" href="#id3" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="14%" />
<col width="32%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Display</th>
<th class="head">Partner/Institution</th>
<th class="head">Folder</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>:1</td>
<td>NOAO</td>
<td><code class="docutils literal"><span class="pre">/home/goodman/data/NOAO</span></code></td>
</tr>
<tr class="row-odd"><td>:2</td>
<td>Brazil</td>
<td><code class="docutils literal"><span class="pre">/home/goodman/data/BRAZIL</span></code></td>
</tr>
<tr class="row-even"><td>:3</td>
<td>UNC</td>
<td><code class="docutils literal"><span class="pre">/home/goodman/data/UNC</span></code></td>
</tr>
<tr class="row-odd"><td>:4</td>
<td>MSU</td>
<td><code class="docutils literal"><span class="pre">/home/goodman/data/MSU</span></code></td>
</tr>
<tr class="row-even"><td>:5</td>
<td>Chile</td>
<td><code class="docutils literal"><span class="pre">/home/goodman/data/CHILE</span></code></td>
</tr>
</tbody>
</table>
<p>For this tutorial we will call the vnc server host name as <code class="docutils literal"><span class="pre">&lt;vnc-server&gt;</span></code>
the display number  is <code class="docutils literal"><span class="pre">&lt;display-number&gt;</span></code> and your password is <code class="docutils literal"><span class="pre">&lt;password&gt;</span></code>.</p>
<p>The VNC connection should work with any VNC Client like TightVNC, TigerVNC,
RealVNC, etc. The first two run on Linux and can be used directly with the
<code class="docutils literal"><span class="pre">vncviewer</span></code> command line.</p>
</div>
<div class="section" id="vnc-from-the-terminal">
<h4>VNC from the Terminal<a class="headerlink" href="#vnc-from-the-terminal" title="Permalink to this headline">¶</a></h4>
<p>Find the <code class="docutils literal"><span class="pre">&lt;display-number&gt;</span></code> that corresponds to you from the <a class="reference internal" href="#vnc-displays-table">VNC Displays table</a>.
Open a terminal, and assuming you have installed <code class="docutils literal"><span class="pre">vncviewer</span></code>.</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">vncviewer</span> <span class="pre">&lt;vnc-server&gt;:&lt;display-number&gt;</span></code></div></blockquote>
<p>You will be asked to type in the <code class="docutils literal"><span class="pre">&lt;password&gt;</span></code> provided.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The real values for <code class="docutils literal"><span class="pre">&lt;vnc-server&gt;</span></code> and <code class="docutils literal"><span class="pre">&lt;password&gt;</span></code>
should be provided by your support scientist.</p>
</div>
<p>If the connection succeeds you will see a <em>Centos 7</em> Desktop using <em>Gnome</em>.</p>
</div>
</div>
<div class="section" id="setup-for-local-installation">
<h3>Setup for local installation<a class="headerlink" href="#setup-for-local-installation" title="Permalink to this headline">¶</a></h3>
<p>The <a href="#id14"><span class="problematic" id="id15">|pipeline name|</span></a> is completely written in Python 3.x and relies on several
libraries like:</p>
<ul class="simple">
<li>NumPy</li>
<li>SciPy</li>
<li>MatPlotLib</li>
<li>Pandas</li>
<li>AstroPy</li>
<li>AstroPy/ccdproc</li>
<li>AstroPy/astroplan</li>
<li>DCR</li>
</ul>
<p>We <strong>do not</strong> recommend the installation of these libraries or the
<a href="#id16"><span class="problematic" id="id17">|pipeline name|</span></a> in your system since updates and upgrades may ruin it. We rather
recomment the use of Virtual Environments. If you are not familiar with this
term, please check the official documentation by visiting the link below:</p>
<blockquote>
<div><p><a class="reference external" href="https://docs.python.org/3/tutorial/venv.html">https://docs.python.org/3/tutorial/venv.html</a></p>
<p>or</p>
<p><a class="reference external" href="http://docs.python-guide.org/en/latest/dev/virtualenvs/">http://docs.python-guide.org/en/latest/dev/virtualenvs/</a></p>
</div></blockquote>
<p>Another option is to install <strong>Conda</strong>, a Virtual Environment Manager, or
<strong>AstroConda</strong>, the same but for astronomers. Everything you need to know
about installing both can be found in the link below:</p>
<blockquote>
<div><a class="reference external" href="https://astroconda.readthedocs.io/">https://astroconda.readthedocs.io/</a></div></blockquote>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>You may find that <cite>ccdproc</cite> and <cite>astroplan</cite> do not come with Astroconda.
They are not available on any Conda channel either. That means that you will
have to install them separately. You can do so by downloading the source files
and installing them by hand, or simply
<a class="reference external" href="https://conda.io/docs/user-guide/tasks/manage-environments.html#activating-an-environment">activate your Virtual Environment</a> and
then install these two packages using pip with</p>
<p class="last"><code class="docutils literal"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">ccdproc</span> <span class="pre">astroplan</span></code></p>
</div>
<p>System installation is not recommended because it can mess things up specially in
Linux and Mac OS. Before you proceed, make sure that your system has all
the required libraries, as described in <a class="reference internal" href="#setup-for-local-installation">Setup for local installation</a>.</p>
<p>Once you have Python running and all the libraries installed either using
Conda/AstroConda or not, you may download the last version available in the
following address:</p>
<blockquote>
<div><a class="reference external" href="https://github.com/soar-telescope/goodman/releases/latest">https://github.com/soar-telescope/goodman/releases/latest</a></div></blockquote>
<p>Before continuing, make sure that your Virtual Environment is active if this is
the case. There are several ways of doing this but normally the command below
should work:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">$</span> <span class="pre">source</span> <span class="pre">activate</span> <span class="pre">&lt;my_environment_name&gt;</span></code></div></blockquote>
<p>Where <code class="docutils literal"><span class="pre">&lt;my_environment_name&gt;</span></code> is the name of your Virtual Environment (e.g.
astroconda).</p>
<p>Now you can finally install the <a href="#id18"><span class="problematic" id="id19">|pipeline name|</span></a>. Download the file, decompress
it, and enter the directory created during the file decompression. Test the
installation by typing:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">$</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">test</span></code></div></blockquote>
<p>If you have any errors, check the traceback. If you find difficulties carring
on at this poing, you may contact us by <a class="reference external" href="https://github.com/soar-telescope/goodman/issues">opening a new issue</a>     or using the e-mail
<cite>goodman-pipeline&#64;ctio.noao.edu</cite>.</p>
<p>If no error messages start popping up in your screen, you are good to carry
on with the installation.</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">$</span> <span class="pre">python</span> <span class="pre">setup.py</span> <span class="pre">install</span></code></div></blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This will install the pipeline in the currently active Python version.
If you have Virtual Environments, make sure that they are active. If not,
you can add the <code class="docutils literal"><span class="pre">--user</span></code> option to install only for your user and avoid
needing root access.</p>
</div>
<div class="section" id="dcr-optional">
<h4>DCR (optional)<a class="headerlink" href="#dcr-optional" title="Permalink to this headline">¶</a></h4>
<div class="admonition-acknowledgement-note admonition">
<p class="first admonition-title">Acknowledgement Note</p>
<p class="last">Please cite: Pych, W., 2004, PASP, 116, 148</p>
</div>
<p>In terms of cosmic ray rejection we shifted to a non-python package because the
results were much better compared to LACosmic’s implementation in Astropy.
LACosmic was not designed to work with spectroscopy.</p>
<p>The latest version of the Goodman Spectroscopic Pipeline uses a modified version
of <code class="docutils literal"><span class="pre">dcr</span></code> to help with the pipeline’s workflow. It is included under</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">&lt;path_to_download_location&gt;/goodman/pipeline/data/dcr-source/dcr/</span></code></div></blockquote>
<p><code class="docutils literal"><span class="pre">goodman</span></code> is the folder that will be created once you untar or unzip the latest
release of the <a href="#id20"><span class="problematic" id="id21">|pipeline name|</span></a>.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">The changes we made to DCR include deletion of all <code class="docutils literal"><span class="pre">HISTORY</span></code> and <code class="docutils literal"><span class="pre">COMMENT</span></code> keywords,
which we don’t use in the pipeline. And addition of a couple of custom
keywords, such as: <code class="docutils literal"><span class="pre">GSP_FNAM</span></code>, which stores the name of the file being
created. <code class="docutils literal"><span class="pre">GSP_DCRR</span></code> which stores the reference to the paper to cite.</p>
</div>
<p>You are still encouraged to visit the official
<a class="reference external" href="http://users.camk.edu.pl/pych/DCR/">Link</a>. We remind again that users of the
Goodman Pipeline should cite the DCR paper with the reference indicated above.</p>
<div class="section" id="compiling-dcr">
<h5>Compiling DCR<a class="headerlink" href="#compiling-dcr" title="Permalink to this headline">¶</a></h5>
<p>Compiling <code class="docutils literal"><span class="pre">dcr</span></code> is actually very simple.</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">cd</span> <span class="pre">&lt;path_to_download_location&gt;/goodman/pipeline/data/dcr-source/dcr/</span></code></div></blockquote>
<p>Then simply type:</p>
<blockquote>
<div><code class="docutils literal"><span class="pre">make</span></code></div></blockquote>
<p>This will compile <cite>dcr</cite> and also it will create other files. The executable
binary here is <code class="docutils literal"><span class="pre">dcr</span></code>.</p>
<p>We have successfully compiled <em>dcr</em> right out the box in several platforms, such as:</p>
<ul class="simple">
<li>Ubuntu 16.04</li>
<li>Centos 7.1, 7.4</li>
<li>MacOS Sierra</li>
<li>Solaris 11</li>
</ul>
</div>
<div class="section" id="installing-the-dcr-binary">
<h5>Installing the DCR binary<a class="headerlink" href="#installing-the-dcr-binary" title="Permalink to this headline">¶</a></h5>
<p>This is a suggested method. If you are not so sure what you are doing, we
recommend you follow the steps shown below. If you are a more advanced user and
you want to do it your own way, all you have to achieve is to have the <code class="docutils literal"><span class="pre">dcr</span></code>
executable binary in your <code class="docutils literal"><span class="pre">$PATH</span></code> variable.</p>
<ol class="arabic">
<li><p class="first">Open a terminal</p>
</li>
<li><p class="first">In your home directory create a hidden directory <code class="docutils literal"><span class="pre">.bin</span></code> (Home directory
should be the default when you open a new terminal window)</p>
<p><code class="docutils literal"><span class="pre">mkdir</span> <span class="pre">~/.bin</span></code></p>
</li>
<li><p class="first">Move the binary of your choice and rename it <code class="docutils literal"><span class="pre">dcr</span></code>. If you compiled it,
most likely it’s already called <code class="docutils literal"><span class="pre">dcr</span></code> so you can ignore the renaming part of
this step.</p>
<p><code class="docutils literal"><span class="pre">mv</span> <span class="pre">dcr.Ubuntu16.04</span> <span class="pre">~/.bin/dcr</span></code></p>
<p>Or</p>
<p><code class="docutils literal"><span class="pre">mv</span> <span class="pre">dcr</span> <span class="pre">~/.bin/dcr</span></code></p>
</li>
<li><p class="first">Add your <code class="docutils literal"><span class="pre">$HOME/.bin</span></code> directory to your <code class="docutils literal"><span class="pre">$PATH</span></code> variable. Open the file
<code class="docutils literal"><span class="pre">.bashrc</span></code> and add the following line.</p>
<p><code class="docutils literal"><span class="pre">export</span> <span class="pre">PATH=$PATH:/home/myusername/.bin</span></code></p>
<p>Where <code class="docutils literal"><span class="pre">/home/myusername</span></code> is of course your home directory.</p>
</li>
<li><p class="first">Close and reopen the terminal or load the <code class="docutils literal"><span class="pre">.bashrc</span></code> file.</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code></p>
</div></blockquote>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017 NOAO/AURA, Inc. All rights reserved..

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>